{{ define "main" }}

{{ $style := resources.Get "scss/podcast_cover.scss" | resources.ToCSS }}
<link rel="stylesheet" href="{{ $style.Permalink }}">

<header class="hero">
    <img src="/consortium.jpg">
    <h1 class="main-title">{{ $.Page.Title }}</h1>

{{ with .Params.tagline }}
  <p class="description">{{ . | markdownify }}</p>
{{ end }}
<p class="action-button-wrapper">
  <a href="/podcasts/" class="action-button">
    Découvrir nos émissions →
  </a>
</p>

</header>


<div class="box" tabindex="0">
{{ range (where .Site.Pages.ByTitle "Layout" "podcast-page") }}
      {{ partial "podcast_cover.html" (dict "context" . "is_showing_titles" false) }}
{{ end }}   
</div>

<h2>Derniers épisodes sortis</h2>

{{ $episode_pages := where .Site.Pages "Params.guid" "!=" nil }}
{{ $recent_episode_pages := first 5 $episode_pages.ByDate.Reverse }}

{{ range $recent_episode_pages }}
    {{ partial "podlove_player" . }}
{{ end }}


{{ $podlove_player_js := resources.Get "js/podlove-style.js" }}
<script type="module" src="{{ $podlove_player_js.Permalink }}"></script>

{{ $podlove_player_js := resources.Get "js/podlove-player.js" }}
<script type="module" src="{{ $podlove_player_js.Permalink }}"></script>

{{ end }}
